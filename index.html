<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calculadora — Ticket, Meta e Conversão</title>

  <style>
    :root{
      --bg:#ffffff;

      /* Caixas */
      --card:#f3f4f6;     /* cinza claro */
      --border:#e5e7eb;

      /* “Caixinhas dos valores” */
      --pill:#e0e3e8;     /* um pouco mais escuro que o card */
      --pillBorder:#d1d5db;

      --text:#111827;
      --muted:#6b7280;

      --radius:16px;
      --shadow: 0 12px 30px rgba(17,24,39,.08);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: var(--bg);
      color: var(--text);
    }

    .wrap{
      max-width: 1100px;
      margin: 28px auto;
      padding: 0 16px 28px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 12px 10px 18px;
      border-bottom: 1px solid var(--border);
      margin-bottom: 18px;
    }

    .brand{
      margin:0;
      font-weight: 900;
      letter-spacing: .2px;
      font-size: 18px;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 18px;
    }
    @media (max-width: 900px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px;
    }

    .card h2{
      margin: 0 0 12px;
      font-size: 13px;
      letter-spacing:.8px;
      text-transform: uppercase;
      color: #111827;
    }

    .row{
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }
    .row:last-child{ border-bottom: 0; padding-bottom: 2px; }

    .line{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
    }

    label{
      font-size: 14px;
      font-weight: 800;
      color: #111827;
      display:block;
      margin-bottom: 6px;
    }

    .hint{
      font-size: 12px;
      color: var(--muted);
      line-height: 1.35;
      margin-top: 2px;
    }

    input{
      width: 100%;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid var(--pillBorder);
      background: #ffffff;
      color: var(--text);
      font-weight: 800;
      font-size: 14px;
      outline: none;
    }
    input:focus{
      border-color: #9ca3af;
      box-shadow: 0 0 0 3px rgba(156,163,175,.25);
    }

    .pill{
      background: var(--pill);
      border: 1px solid var(--pillBorder);
      border-radius: 14px;
      padding: 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      margin-top: 10px;
    }

    .pill .k{
      font-size: 13px;
      font-weight: 900;
      color:#111827;
    }
    .pill .v{
      font-variant-numeric: tabular-nums;
      font-size: 16px;
      font-weight: 900;
      color:#111827;
    }

    .muted{
      color: var(--muted);
      font-weight: 700;
      font-size: 12px;
      margin-top: 10px;
      line-height: 1.35;
    }

    .stack{
      display:flex;
      flex-direction:column;
      gap: 12px;
      margin-top: 8px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header class="topbar">
      <h1 class="brand">Calculadora de Ticket, Meta e Conversão</h1>
    </header>

    <div class="grid">
      <!-- ESQUERDA: ENTRADAS -->
      <section class="card">
        <h2>Entradas</h2>

        <div class="row">
          <label for="ticket">Ticket (R$)</label>
          <input id="ticket" type="number" min="0" step="1" value="450" inputmode="numeric" />
          <div class="hint">Quanto você ganha por venda.</div>
        </div>

        <div class="row">
          <label for="vendasAtual">Vendas atuais</label>
          <input id="vendasAtual" type="number" min="0" step="1" value="10" inputmode="numeric" />
          <div class="hint">Quantas vendas você faz hoje (no período que você está analisando).</div>
        </div>

        <div class="row">
          <label for="metaVendas">Meta de vendas</label>
          <input id="metaVendas" type="number" min="0" step="1" value="25" inputmode="numeric" />
          <div class="hint">Quantas vendas você quer bater.</div>
        </div>

        <div class="row">
          <label for="compraEm20">A cada 20 que chegam, quantos compram?</label>
          <input id="compraEm20" type="number" min="0" max="20" step="1" value="2" inputmode="numeric" />
          <div class="hint">Exemplo: 2 significa 2 compras a cada 20 pessoas que chegam.</div>
        </div>

        <div class="muted">
          Engajamento médio considerado automaticamente: <b>60%</b>.
        </div>
      </section>

      <!-- DIREITA: RESULTADOS -->
      <aside class="card">
        <h2>Resultados</h2>

        <div class="stack">
          <div class="pill">
            <div class="k">Faturamento atual</div>
            <div class="v" id="fatAtual">R$ 0</div>
          </div>

          <div class="pill">
            <div class="k">Faturamento na meta</div>
            <div class="v" id="fatMeta">R$ 0</div>
          </div>

          <div class="pill">
            <div class="k">Diferença (gap)</div>
            <div class="v" id="gap">R$ 0</div>
          </div>
        </div>

        <h2 style="margin-top:18px;">Conversão</h2>

        <div class="stack">
          <div class="pill">
            <div class="k">Quantas pessoas precisam chegar</div>
            <div class="v" id="precisaChegar">—</div>
          </div>

          <div class="pill">
            <div class="k">Quantas pessoas engajam (60%)</div>
            <div class="v" id="engajam">—</div>
          </div>

          <div class="pill">
            <div class="k">Para gerar a meta de vendas</div>
            <div class="v" id="geraMeta">0</div>
          </div>
        </div>

        <div class="muted" id="obs"></div>
      </aside>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    const el = {
      ticket: $('ticket'),
      vendasAtual: $('vendasAtual'),
      metaVendas: $('metaVendas'),
      compraEm20: $('compraEm20'),

      fatAtual: $('fatAtual'),
      fatMeta: $('fatMeta'),
      gap: $('gap'),

      precisaChegar: $('precisaChegar'),
      engajam: $('engajam'),
      geraMeta: $('geraMeta'),
      obs: $('obs'),
    };

    const brl0 = new Intl.NumberFormat('pt-BR', { style:'currency', currency:'BRL', maximumFractionDigits: 0 });
    const int0 = new Intl.NumberFormat('pt-BR', { maximumFractionDigits: 0 });

    function n(v){
      const x = Number(v);
      return Number.isFinite(x) ? x : 0;
    }

    function clamp(x, min, max){
      return Math.min(max, Math.max(min, x));
    }

    function calc(){
      const ticket = Math.max(0, Math.floor(n(el.ticket.value)));
      const vendasAtual = Math.max(0, Math.floor(n(el.vendasAtual.value)));
      const metaVendas = Math.max(0, Math.floor(n(el.metaVendas.value)));

      let compraEm20 = Math.floor(n(el.compraEm20.value));
      compraEm20 = clamp(compraEm20, 0, 20);

      // mantém input “limpo”
      el.ticket.value = ticket;
      el.vendasAtual.value = vendasAtual;
      el.metaVendas.value = metaVendas;
      el.compraEm20.value = compraEm20;

      // faturamentos
      const faturamentoAtual = vendasAtual * ticket;
      const faturamentoMeta = metaVendas * ticket;
      const gap = Math.max(0, faturamentoMeta - faturamentoAtual);

      el.fatAtual.textContent = brl0.format(faturamentoAtual);
      el.fatMeta.textContent = brl0.format(faturamentoMeta);
      el.gap.textContent = brl0.format(gap);

      // conversão
      el.geraMeta.textContent = int0.format(metaVendas);

      const engRate = 0.60;

      if (compraEm20 <= 0){
        el.precisaChegar.textContent = "—";
        el.engajam.textContent = "—";
        el.obs.textContent = "Se a resposta for 0 compras a cada 20 que chegam, não dá para calcular o volume necessário (conversão zero).";
        return;
      }

      // conversão: compras por chegada = compraEm20 / 20
      // chegadas necessárias = metaVendas / (compraEm20/20) = metaVendas * 20 / compraEm20
      const pessoasChegar = Math.ceil((metaVendas * 20) / compraEm20);
      const pessoasEngajam = Math.ceil(pessoasChegar * engRate);

      el.precisaChegar.textContent = int0.format(pessoasChegar);
      el.engajam.textContent = int0.format(pessoasEngajam);

      el.obs.textContent =
        `Conversão usada: ${compraEm20}/20 (= ${(compraEm20/20*100).toFixed(1).replace('.', ',')}%). ` +
        `Engajamento médio: 60%.`;
    }

    ['input','change'].forEach(evt => {
      el.ticket.addEventListener(evt, calc);
      el.vendasAtual.addEventListener(evt, calc);
      el.metaVendas.addEventListener(evt, calc);
      el.compraEm20.addEventListener(evt, calc);
    });

    calc();
  </script>
</body>
</html>

<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calculadora de Ticket, Meta e Conversão</title>

  <style>
    :root{
      --bg:#ffffff;

      /* caixas */
      --panel:#f3f4f6;     /* cinza claro */
      --pill:#e5e7eb;      /* cinza um pouco mais escuro */
      --border:#e5e7eb;

      --text:#111827;
      --muted:#6b7280;

      /* slider */
      --accent:#374151;    /* preenchimento */
      --track:#d1d5db;     /* trilho */
      --thumb:#111827;

      /* destaque */
      --green:#d9ffd2;     /* verde claro (faturamento) */

      --radius:18px;
      --shadow: 0 10px 26px rgba(17,24,39,.06);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: var(--bg);
      color: var(--text);
      font-weight: 400;
    }

    .wrap{
      max-width: 760px;
      margin: 22px auto;
      padding: 0 16px 34px;
    }

    header{
      text-align:center;
      padding: 14px 8px 18px;
      border-bottom: 1px solid var(--border);
      margin-bottom: 18px;
    }

    h1{
      margin:0;
      font-size: 20px;
      letter-spacing: .2px;
      font-weight: 400; /* minimalista */
    }

    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px;
      margin-bottom: 14px;
    }

    .panel-title{
      font-size: 13px;
      letter-spacing: .9px;
      text-transform: uppercase;
      color: var(--muted);
      margin: 0 0 12px;
      font-weight: 400;
    }

    .row{
      padding: 14px 0;
      border-bottom: 1px solid rgba(17,24,39,.08);
    }
    .row:last-child{ border-bottom:0; padding-bottom: 4px; }

    .label-line{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 10px;
    }

    .label{
      font-size: 14px;
      color: var(--text);
      font-weight: 400;
    }

    .pill{
      min-width: 124px;
      text-align:right;
      padding: 8px 12px;
      border-radius: 14px;
      background: var(--pill);
      border: 1px solid rgba(17,24,39,.08);
      font-variant-numeric: tabular-nums;
      font-weight: 400;
      color: var(--text);
    }

    /* slider fino */
    input[type="range"]{
      width: 100%;
      height: 6px; /* mais fino */
      border-radius: 999px;
      outline: none;
      background: linear-gradient(to right,
        var(--accent) 0%,
        var(--accent) var(--fill, 0%),
        var(--track) var(--fill, 0%),
        var(--track) 100%);
      appearance:none;
      -webkit-appearance:none;
    }
    input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none;
      appearance:none;
      width: 16px;
      height: 16px;
      border-radius: 999px;
      background: #fff;
      border: 3px solid var(--thumb);
      box-shadow: 0 8px 14px rgba(0,0,0,.10);
      cursor: pointer;
    }
    input[type="range"]::-moz-range-thumb{
      width: 16px;
      height: 16px;
      border-radius: 999px;
      background: #fff;
      border: 3px solid var(--thumb);
      box-shadow: 0 8px 14px rgba(0,0,0,.10);
      cursor: pointer;
    }

    .card{
      background:#ffffff;
      border: 1px solid rgba(17,24,39,.10);
      border-radius: 16px;
      padding: 14px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }

    .card.green{
      background: var(--green);
      border-color: rgba(17,24,39,.10);
    }

    .k{
      color: var(--muted);
      font-size: 13px;
      font-weight: 400;
    }

    .v{
      color: var(--text);
      font-size: 16px;
      font-variant-numeric: tabular-nums;
      font-weight: 400;
    }

    /* Funil */
    .funnel-box{
      background:#ffffff;
      border: 1px solid rgba(17,24,39,.10);
      border-radius: 16px;
      padding: 16px 14px 18px;
      display:flex;
      justify-content:center;
      align-items:center;
    }

    svg{
      display:block;
      width: 100%;
      max-width: 380px;
      height:auto;
    }

    /* ===== FUNIL: estética do print ===== */
    .fOutline{ stroke:#111111; stroke-width:2; fill:none; }
    .fOuterShadow{ stroke:#000000; stroke-opacity:.14; stroke-width:5; fill:none; }
    .fFillTop{ fill:#ededed; }
    .fFillMid{ fill:#efefef; }
    .fFillNeck{ fill:#f4f4f4; }
    .fDivider{ stroke:#111111; stroke-opacity:.35; stroke-width:2; }
    .fLabel{
      fill:#7a7a7a;
      font-weight:400;
      font-size: 30px;
      letter-spacing:.2px;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    .fNum{
      fill:#111111;
      font-weight:400;
      font-size: 34px;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    .fBuyNum{
      fill:#b0412e; /* vermelho do print */
      font-weight:400;
      font-size: 44px;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    .fBuyLabel{
      fill:#9b9b9b;
      font-weight:400;
      font-size: 34px;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }

    .fArrow{
      stroke:#111111;
      stroke-opacity:.55;
      stroke-width:2;
      fill:none;
      stroke-dasharray:6 7; /* pontilhado */
      stroke-linecap:round;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <h1>Método Marcelo Reinecken</h1>
    </header>

    <!-- ORDEM IGUAL AO PRINT -->
    <!-- 1) PARÂMETROS: Ticket + Vendas atuais -->
    <section class="panel">
      <div class="panel-title">Parâmetros</div>

      <div class="row">
        <div class="label-line">
          <div class="label">Ticket ($)</div>
          <div class="pill" id="vTicket">$ 450</div>
        </div>
        <input id="ticket" type="range" min="50" max="5000" step="50" value="450" />
      </div>

      <div class="row">
        <div class="label-line">
          <div class="label">Vendas atuais</div>
          <div class="pill" id="vVendasAtuais">10</div>
        </div>
        <input id="vendasAtuais" type="range" min="1" max="50" step="1" value="10" />
      </div>
    </section>

    <!-- 2) RESULTADO: Faturamento (verde claro) -->
    <section class="panel">
      <div class="panel-title">Resultado</div>
      <div class="card green">
        <div class="k">Faturamento</div>
        <div class="v" id="rFatAtual">$ 0</div>
      </div>
    </section>

    <!-- 3) Meta de vendas (slider) -->
    <section class="panel">
      <div class="row" style="padding-top:0;">
        <div class="label-line">
          <div class="label">Meta de vendas</div>
          <div class="pill" id="vMeta">30</div>
        </div>
        <input id="meta" type="range" min="1" max="100" step="1" value="30" />
      </div>
    </section>

    <!-- 4) Faturamento na meta (branco) -->
    <section class="panel">
      <div class="card">
        <div class="k">Faturamento na meta</div>
        <div class="v" id="rFatMeta">$ 0</div>
      </div>
    </section>

    <!-- 5) Conversão (slider) -->
    <section class="panel">
      <div class="row" style="padding-top:0;">
        <div class="label-line">
          <div class="label">A cada 20 que chegam, quantos compram?</div>
          <div class="pill" id="vConv">2</div>
        </div>
        <input id="conv" type="range" min="1" max="20" step="1" value="2" />
      </div>
    </section>

    <!-- 6) FUNIL (alterado: estética 100% do print) -->
    <section class="panel">
      <div class="funnel-box">
        <svg viewBox="0 0 520 640" role="img" aria-label="Funil">
          <!-- setas pontilhadas de cima (como no print) -->
          <path class="fArrow" d="M260 38 C240 55, 220 70, 210 92" />
          <path class="fArrow" d="M260 38 C260 58, 260 76, 260 98" />
          <path class="fArrow" d="M260 38 C280 55, 300 70, 310 92" />

          <!-- leve "sombra" externa (como dupla linha do print) -->
          <path class="fOuterShadow" d="M92 110 L428 110 L372 250 L148 250 L188 446 L332 446 L344 512 L176 512 L148 250" opacity=".0"/>
          <!-- FUNIL (simétrico, reto) -->
          <!-- corpo (top + middle) -->
          <polygon class="fFillTop" points="90,110 430,110 360,330 160,330"></polygon>
          <polygon class="fFillMid" points="160,330 360,330 330,470 190,470"></polygon>

          <!-- bocal (neck) -->
          <polygon class="fFillNeck" points="225,470 295,470 315,590 205,590"></polygon>

          <!-- contorno -->
          <polygon class="fOutline" points="90,110 430,110 360,330 160,330"></polygon>
          <polygon class="fOutline" points="160,330 360,330 330,470 190,470"></polygon>
          <polygon class="fOutline" points="225,470 295,470 315,590 205,590"></polygon>

          <!-- divisórias internas (bem finas) -->
          <line class="fDivider" x1="140" y1="250" x2="380" y2="250"></line>
          <line class="fDivider" x1="175" y1="410" x2="345" y2="410"></line>

          <!-- textos (menores, cinza, como no print) -->
          <!-- Chegam -->
          <text id="fChegamN" x="260" y="210" text-anchor="middle" class="fNum">0</text>
          <text x="260" y="185" text-anchor="middle" class="fLabel">Chegam</text>

          <!-- Engajam -->
          <text id="fEngajamN" x="260" y="365" text-anchor="middle" class="fNum">0</text>
          <text x="260" y="340" text-anchor="middle" class="fLabel">Engajam</text>

          <!-- Compram: número vermelho dentro do bocal + label abaixo -->
          <text id="fCompramN" x="260" y="545" text-anchor="middle" class="fBuyNum">0</text>
          <text x="260" y="630" text-anchor="middle" class="fBuyLabel">Compram</text>
        </svg>
      </div>
    </section>
  </div>

  <script>
    const el = {
      ticket: document.getElementById('ticket'),
      vendasAtuais: document.getElementById('vendasAtuais'),
      meta: document.getElementById('meta'),
      conv: document.getElementById('conv'),

      vTicket: document.getElementById('vTicket'),
      vVendasAtuais: document.getElementById('vVendasAtuais'),
      vMeta: document.getElementById('vMeta'),
      vConv: document.getElementById('vConv'),

      rFatAtual: document.getElementById('rFatAtual'),
      rFatMeta: document.getElementById('rFatMeta'),

      fChegamN: document.getElementById('fChegamN'),
      fEngajamN: document.getElementById('fEngajamN'),
      fCompramN: document.getElementById('fCompramN'),
    };

    function safeInt(v, fallback){
      const n = Number(v);
      return Number.isFinite(n) ? n : fallback;
    }

    // moeda só com "$"
    function money(n){
      const x = Math.round(Number(n) || 0);
      return '$ ' + x.toLocaleString('en-US');
    }

    function setFill(rangeEl){
      const min = safeInt(rangeEl.min, 0);
      const max = safeInt(rangeEl.max, 1);
      const val = safeInt(rangeEl.value, min);
      const pct = (max === min) ? 0 : ((val - min) / (max - min)) * 100;
      rangeEl.style.setProperty('--fill', pct.toFixed(2) + '%');
    }

    function calc(){
      const ticket = safeInt(el.ticket.value, 50);
      const vendasAtuais = safeInt(el.vendasAtuais.value, 1);
      const metaVendas = safeInt(el.meta.value, 1);
      const compramCada20 = safeInt(el.conv.value, 1); // 1..20

      // pills
      el.vTicket.textContent = money(ticket);
      el.vVendasAtuais.textContent = String(vendasAtuais);
      el.vMeta.textContent = String(metaVendas);
      el.vConv.textContent = String(compramCada20);

      // faturamentos
      el.rFatAtual.textContent = money(vendasAtuais * ticket);
      el.rFatMeta.textContent = money(metaVendas * ticket);

      // conversão: a cada 20 chegam, compram X => taxa = X/20
      const taxaCompra = Math.max(compramCada20 / 20, 1e-9);

      // funil (ordem do print)
      const compram = metaVendas;
      const chegam = Math.ceil(compram / taxaCompra);
      const engajam = Math.round(chegam * 0.60);

      el.fChegamN.textContent = String(chegam);
      el.fEngajamN.textContent = String(engajam);
      el.fCompramN.textContent = String(compram);

      [el.ticket, el.vendasAtuais, el.meta, el.conv].forEach(setFill);
    }

    [el.ticket, el.vendasAtuais, el.meta, el.conv].forEach(r => {
      r.addEventListener('input', calc);
      setFill(r);
    });

    calc();
  </script>
</body>
</html>
